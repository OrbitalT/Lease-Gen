<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="courtroom.css">
    <title>Court-Room</title>
</head>

<body>

    <section class="container">
        <header>Court-Room v 1.0.0</header>

        <form class="form" id="form" onsubmit="window.location.reload();" action="">

            <div class="row">
                <div class="col-50">
                    <label for="name1">Name:</label><br>
                    <input type="text" name="name1" id="name1" required><br>
                    <label for="address1">Address:</label><br>
                    <input type="text" name="address1" id="address1" required><br>
                    <label for="address2">Address 2:</label><br>
                    <input type="text" name="address2" id="address2"><br>
                    <label for="city1">City:</label><br>
                    <input type="text" name="city1" id="city1" required><br>
                    <label for="state1">State:</label><br>
                    <input type="text" name="state1" id="state1" required><br>
                    <label for="zip1">Zip:</label><br>
                    <input type="text" name="zip1" id="zip1" required><br>
                    <label for="phone1">Phone:</label><br>
                    <input type="text" name="phone1" id="phone1" required><br>
                </div>

                <div id="person2" class="col-50">
                    <label for="name2">Name:</label><br>
                    <input type="text" name="name2" id="name2"><br>
                    <label for="address3">Address:</label><br>
                    <input type="text" name="address3" id="address3"><br>
                    <label for="address4">Address 2:</label><br>
                    <input type="text" name="address4" id="address4"><br>
                    <label for="city2">City:</label><br>
                    <input type="text" name="city2" id="city2"><br>
                    <label for="state2">State:</label><br>
                    <input type="text" name="state2" id="state2"><br>
                    <label for="zip2">Zip:</label><br>
                    <input type="text" name="zip2" id="zip2"><br>
                    <label for="phone2">Phone:</label><br>
                    <input type="text" name="phone2" id="phone2"><br>
                </div>
            </div>

            <br>

            <div class="row">
                <div class="col-50">
                    <label for="county">County:</label><br>
                    <select name="county" id="county">
                        <option value="Durham">Durham</option>
                    </select><br>

                    <label for="owner">Owner:</label><br>
                    <select name="owner" id="owner">
                        <option value="ERROR">----Choose Property----</option>
                        <option value="Glenbrook East LLC">Glenbrook East</option>
                        <option value="Ticon Inc">Glenbrook West</option>
                        <option value="WJM Holdings II LLC">Glenbrook West II</option>
                        <option value="Garrett Road Properties LLC">Glenbrook West III</option>
                        <option value="Ticon Thomas Partnership">Pickett Square</option>
                        <option value="Hawks Nest LLC">Hawks Nest</option>
                        <option value="Avalon at Bridgefield Apartments LLC">Avalon East</option>
                        <option value="Meca Properties LLC">Avalon West</option>
                        <!-- <option value="Vincent Street Properties LLC">Vincent</option> -->
                        <option value="Lenox East LLC">Lenox East</option>
                        <option value="Lenox West LLC">Lenox West</option>
                        <option value="Mattie Inc">Bradford Ridge</option>
                        <option value="Ticon Inc">Dupont Circle & 200 Andrews Road</option>
                        <option value="ERROR">----Audubon----</option>
                        <option value="Audubon Lake Apartments LLC">Audubon Lake</option>
                        <option value="Highgate Townhomes LLC">Highgate Townhomes</option>
                        <option value="Fox Chase & Lochridge LLC">Fox Chase & Lochridge</option>
                        <option value="Bentley Ridge Land LLC">Bentley Ridge</option>
                        <option value="ERROR">----Pineridge----</option>
                        <option value="Pine Ridge Apartments of Durham LLC">Pine Ridge</option>
                        <option value="Taylors Pond Land LLC">Taylors Pond</option>
                        <option value="Ticon Properties LLC">Sutton Station</option>
                    </select><br>

                    <label for="propdesc">Property Description:</label><br>
                    <input type="text" name="propdesc" id="propdesc" required><br>

                    <label for="breachdesc">File Reason:</label><br>
                    <input type="text" name="breachdesc" id="breachdesc" required><br>


                    <label for="rentrate">Rent Rate:</label><br>
                    <input type="currency" value="0" name="rentrate" id="rentrate"><br>
                    <label for="rentpast">Rent Behind:</label><br>
                    <input type="currency2" value="0" name="rentpast" id="rentpast"><br>
                </div>
                <div class="col-50">
                    <label for="trialdate">Court Date:</label><br>
                    <input type="date" name="trialdate" id="trialdate"><br>
                    <label for="trialtime">Court Time:</label><br>
                    <input type="text" name="trialtime" id="trialtime"><br>
                    <label for="am">AM</label>
                    <input type="checkbox" name="am" id="am"><br>
                    <label for="pm">PM</label>
                    <input type="checkbox" name="pm" id="pm"><br>

                    <label for="signdate">Sign Date:</label><br>
                    <input type="date" name="signdate" id="signdate"><br>
                </div>
            </div>

            <br>

            <input type="submit" value="Submit">

        </form>

        <label for="secondPerson">Add Second Person</label>
        <input type="checkbox" name="secondPerson" id="secondPerson">

    </section>

    <script>
        // Money Formating 1
        var currencyInput = document.querySelector('input[type="currency"]')
        var currency = 'USD' // https://www.currency-iso.org/dam/downloads/lists/list_one.xml

        // format inital value
        onBlur({
            target: currencyInput
        })

        // bind event listeners
        currencyInput.addEventListener('focus', onFocus)
        currencyInput.addEventListener('blur', onBlur)


        function localStringToNumber(s) {
            return Number(String(s).replace(/[^0-9.-]+/g, ""))
        }

        function onFocus(e) {
            var value = e.target.value;
            e.target.value = value ? localStringToNumber(value) : ''
        }

        function onBlur(e) {
            var value = e.target.value

            var options = {
                maximumFractionDigits: 2,
                currency: currency,
                style: "currency",
                currencyDisplay: "symbol"
            }

            e.target.value = (value || value === 0) ?
                localStringToNumber(value).toLocaleString(undefined, options) :
                ''
        }

        // Money Formating 2
        var currencyInput = document.querySelector('input[type="currency2"]')
        var currency = 'USD' // https://www.currency-iso.org/dam/downloads/lists/list_one.xml

        // format inital value
        onBlur({
            target: currencyInput
        })

        // bind event listeners
        currencyInput.addEventListener('focus', onFocus)
        currencyInput.addEventListener('blur', onBlur)


        function localStringToNumber(s) {
            return Number(String(s).replace(/[^0-9.-]+/g, ""))
        }

        function onFocus(e) {
            var value = e.target.value;
            e.target.value = value ? localStringToNumber(value) : ''
        }

        function onBlur(e) {
            var value = e.target.value

            var options = {
                maximumFractionDigits: 2,
                currency: currency,
                style: "currency",
                currencyDisplay: "symbol"
            }

            e.target.value = (value || value === 0) ?
                localStringToNumber(value).toLocaleString(undefined, options) :
                ''
        }

        // Shows second person form entrys
        $('#person2').hide();
        $('#secondPerson').change(function () {
            if ($(this).prop('checked') === false) {
                $('#person2').hide();
            }
            if ($(this).prop('checked') === true) {
                $('#person2').show();
            }
        });

        // Stops ENTER button
        $(document).ready(function () {
            $(window).keydown(function (event) {
                if (event.keyCode == 13) {
                    event.preventDefault();
                    return false;
                }
            });
        });
    </script>

    <script>
        //Electron connection
        const electron = require('electron');
        const {
            ipcRenderer
        } = electron;

        function handleSubmit(event) {
            event.preventDefault();

            const data = new FormData(event.target);

            const courtdata = Object.fromEntries(data.entries());
            console.log(courtdata);

            ipcRenderer.send('courtdata', courtdata);
        }

        const form = document.querySelector('form');
        form.addEventListener('submit', handleSubmit);
    </script>


</body>

</html>